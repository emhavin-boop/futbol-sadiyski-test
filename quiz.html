<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Футболен Съдийски Тест 2026</title>
    
    <!-- PWA / manifest настройки -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0A2A5E">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(to bottom, #f0f4f8, #d9e2ec);
            color: #1c1c1e;
            margin: 0;
            padding: 12px;
            min-height: 100vh;
        }
        .container {
            max-width: 920px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
        }
        h1, h2 { text-align: center; color: #0A2A5E; }
        .button {
            display: block;
            width: 100%;
            max-width: 420px;
            margin: 14px auto;
            padding: 18px;
            font-size: 19px;
            font-weight: 600;
            background: #0A2A5E;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }
        .button:hover { background: #08204a; }
        #timer { text-align: center; font-size: 18px; color: #d32f2f; margin: 16px 0; font-weight: bold; }
        .question { font-size: 17px; margin: 20px 0; line-height: 1.5; }
        .option {
            background: #f5f5f7;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            padding: 16px;
            margin: 10px 0;
            font-size: 16px;
            cursor: pointer;
        }
        .option.selected-correct   { background: #4caf50; color: white; }
        .option.selected-wrong     { background: #f44336; color: white; }
        #score { font-size: 24px; text-align: center; color: #0A2A5E; margin: 24px 0; }
        @media (max-width: 600px) {
            .container { padding: 16px; }
            .button { font-size: 18px; padding: 16px; }
        }
    </style>
</head>
<body>

<div class="container" id="start">
    <h1>Добре дошли!</h1>
    <p style="text-align:center;">Тест по футболни правила и съдийство<br>20 случайни въпроса без повторение</p>
    <button class="button" onclick="startTest(0)">Без лимит</button>
    <button class="button" onclick="startTest(15)">15 минути</button>
    <button class="button" onclick="startTest(20)">20 минути</button>
</div>

<div class="container" id="quiz" style="display:none">
    <div id="timer"></div>
    <div id="qnum"></div>
    <div id="qtext" class="question"></div>
    <div id="opts"></div>
    <button class="button" id="next" style="display:none" onclick="nextQ()">Следващ</button>
</div>

<div class="container" id="result" style="display:none">
    <h2>Резултат</h2>
    <div id="score"></div>
    <button class="button" onclick="showReview()">Преглед</button>
    <button class="button" onclick="restart()">Нов тест</button>
</div>

<div class="container" id="review" style="display:none">
    <h2>Преглед на отговорите</h2>
    <div id="reviewContent"></div>
    <button class="button" onclick="back()">Назад</button>
</div>

<script>
const questions = [
    { q: "Защитник изпълнява ПСУ и подава топката назад към своя вратар, намиращ се в своето НП. Вратарят се опитва да ритне топката, но се подхлъзва и не успява да я докосне, след което топката влиза във вратата му. Решение?", opts: ["Гол - НК", "Съдийска топка - НК", "Ъглов удар - НК", "Удар от вратата - НК", "ПСУ се повтаря - ЖК"], ans: 1 },
    { q: "По време на игра вратар удря с юмрук съотборник в своето НП, недоволен от неговото представяне до момента. Какво трябва да отсъди съдията?", opts: ["НУ - ЧК", "НСУ - ЧК", "НУ - ЖК", "Съдийска топка - ЧК", "НУ - НК"], ans: 1 },
    { q: "По време на игра, от своето НП, вратар наплюва свой съотборник, стоящ пред НП, недоволен от неговото представяне до момента. Какво трябва да отсъди съдията?", opts: ["НУ - НК", "ПСУ - ЧК", "НСУ - ЖК", "ПСУ - ЖК", "Съдийска топка - НК"], ans: 1 },
    { q: "По време на игра вратар удря с юмрук свой съотборник, напуснал игралното поле секунди преди това. Какво трябва да отсъди съдията?", opts: ["НУ - ЧК", "НСУ - ЧК", "НСУ - ЖК", "ПСУ - ЖК", "Съдийска топка - ЧК"], ans: 1 },
    { q: "Докато топката е в игра, състезател на отбор А удря с юмрук навлязъл на игралното поле фен на отбор В, като ситуацията се развива в НП на отбор А. Какво трябва да бъде решението?", opts: ["НУ - ЧК", "НСУ - ЧК", "Съдийска топка - ЖК", "ПСУ - ЖК", "Съдийска топка - ЧК"], ans: 4 },
    { q: "Докато топката е в игра, състезател удря с юмрук навлязъл на игралното поле фен на неговия отбор, като ситуацията се развива в центъра на терена. Какво трябва да бъде решението?", opts: ["НУ - ЧК", "НСУ - НК", "НСУ - ЖК", "ПСУ - ЧК", "Съдийска топка - ЧК"], ans: 4 },
    { q: "При спряна игра съдията инструктира №8 да напусне игралното поле, за да свали пръстена си. №8 излиза, след което се връща по време на игра на терена без разрешение на съдията, и отиграва топката... Как трябва да се процедира?", opts: ["НСУ - ЖК на №8", "НСУ - 2 ЖК и ЧК на №8", "ПСУ - 2 ЖК и ЧК на №8", "Съдийска топка - НК", "ПСУ - ЧК на №8"], ans: 2 },
    { q: "При изпълнение на НУ вратарят скъсява дистанцията, напускайки линията на вратата, но топката се удря в гредата и след това изпълнителят я вкарва директно във вратата. Какво трябва да реши съдията?", opts: ["Повторение на НУ - ЖК", "НСУ - НК", "ПСУ - НК", "Гол - НК", "Съдийска топка - ЖК"], ans: 1 },
    { q: "При бързо изпълнение на удар от вратата, преди топката да е напуснала очертанията на наказателното поле, играч на противниковия отбор се намира вътре в наказателното поле. Какви действия трябва да предприеме съдийският екип?", opts: ["Повторение на удара - ЖК", "НСУ - ЖК", "НК - Играта продължава", "Съдийска топка - НК", "Устно предупреждение - НК"], ans: 2 }
    // Ако имаш още въпроси – добави ги тук по същия начин
];

let currentQs = [];
let userAns = [];
let curIdx = 0;
let timeLeft = 0;
let timer = null;

function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function startTest(mins) {
    timeLeft = mins * 60;
    currentQs = shuffle([...questions]).slice(0, 20);
    userAns = new Array(20).fill(-1);
    curIdx = 0;
    document.getElementById('start').style.display = 'none';
    document.getElementById('quiz').style.display = 'block';
    if (timeLeft > 0) {
        timer = setInterval(updateTimer, 1000);
        updateTimer();
    }
    showQ();
}

function updateTimer() {
    timeLeft--;
    let m = Math.floor(timeLeft / 60);
    let s = timeLeft % 60;
    document.getElementById('timer').innerText = `Оставащо време: ${m}:${s.toString().padStart(2,'0')}`;
    if (timeLeft <= 0) finishTest();
}

function showQ() {
    document.getElementById('qnum').innerText = `Въпрос ${curIdx + 1} от 20`;
    document.getElementById('qtext').innerText = currentQs[curIdx].q;
    let html = '';
    currentQs[curIdx].opts.forEach((opt, i) => {
        html += `<div class="option" onclick="pick(${i})">${opt}</div>`;
    });
    document.getElementById('opts').innerHTML = html;
    document.getElementById('next').style.display = 'none';
}

function pick(idx) {
    userAns[curIdx] = idx;
    let opts = document.querySelectorAll('.option');
    opts.forEach((el, i) => {
        el.onclick = null;
        if (i === currentQs[curIdx].ans) el.classList.add('selected-correct');
        if (i === idx && idx !== currentQs[curIdx].ans) el.classList.add('selected-wrong');
    });
    document.getElementById('next').style.display = 'block';
}

function nextQ() {
    curIdx++;
    if (curIdx < 20) showQ();
    else finishTest();
}

function finishTest() {
    if (timer) clearInterval(timer);
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('result').style.display = 'block';
    let correct = 0;
    userAns.forEach((a, i) => { if (a === currentQs[i].ans) correct++; });
    let pct = ((correct / 20) * 100).toFixed(1);
    document.getElementById('score').innerHTML = `${correct} от 20 верни<br>Успеваемост: ${pct}%`;
}

function showReview() {
    document.getElementById('result').style.display = 'none';
    document.getElementById('review').style.display = 'block';
    let html = '';
    currentQs.forEach((q, i) => {
        let u = userAns[i];
        html += `<p><strong>Въпрос ${i+1}:</strong> ${q.q}</p>`;
        q.opts.forEach((o, j) => {
            let cls = (j === q.ans) ? 'selected-correct' : (j === u ? 'selected-wrong' : '');
            html += `<p class="${cls}">${o}</p>`;
        });
        html += '<hr>';
    });
    document.getElementById('reviewContent').innerHTML = html;
}

function back() {
    document.getElementById('review').style.display = 'none';
    document.getElementById('result').style.display = 'block';
}

function restart() {
    document.getElementById('review').style.display = 'none';
    document.getElementById('result').style.display = 'none';
    document.getElementById('start').style.display = 'block';
    document.getElementById('timer').innerText = '';
}
</script>
</body>
</html>
